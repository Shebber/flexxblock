<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Flexblock – Verify</title>
  <meta name="description" content="Verify-Seite für Flexblock – phygitale NFT-Acrylprints mit digitaler Identität." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0a0a0a;
      --panel:#111111;
      --text:#f1f1f1;
      --muted:#9aa4b2;
      --magenta:#ff00ff; /* 100% Magenta */
      --ok:#00ffa7;
      --border:#1f1f1f;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;background:var(--bg);color:var(--text);
      font-family:"IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      overflow-x:hidden;
    }
    /* Fullscreen WebGL Canvas */
    #gl{
      position:fixed; inset:0; width:100vw; height:100vh; display:block; z-index:0;
    }
    /* halbtransparente Overlay-Scrim damit UI lesbarer bleibt */
    .scrim{
      position:fixed; inset:0; pointer-events:none; z-index:1;
      background: radial-gradient(1200px 800px at 70% 20%, rgba(255,0,255,0.10), transparent 60%),
                  linear-gradient(rgba(0,0,0,0.35), rgba(0,0,0,0.6));
      mix-blend-mode:screen;
    }

    /* Header mit Wordmark (Primär) – nie mit Icon kombinieren */
    header{
      position:fixed; top:18px; left:18px; z-index:3; display:flex; align-items:center; gap:14px;
      letter-spacing:0.08em; text-transform:uppercase; font-weight:600;
      filter:drop-shadow(0 0 6px rgba(255,0,255,0.2));
      user-select:none;
    }
    .wordmark{ display:inline-block; line-height:0; }
    .wordmark svg{ height:26px; width:auto; display:block; }
    .tag{font-weight:400;color:var(--muted);border:1px solid var(--border); padding:4px 8px; border-radius:10px}

    /* Icon nur als Wasserzeichen */
    .icon-watermark{
      position:fixed; right:2vw; bottom:2vh; z-index:1; opacity:0.06; filter:blur(0.2px);
      width:min(42vw,520px); height:auto; pointer-events:none;
    }

    /* Haupt-Container */
    .wrap{
      position:relative; z-index:2; min-height:100dvh;
      display:grid; place-items:center; padding:96px 20px 40px;
    }
    .card{
      width:min(1100px, 92vw);
      background:linear-gradient(180deg, rgba(17,17,17,0.75), rgba(10,10,10,0.85));
      border:1px solid var(--border);
      border-radius:20px; padding:24px; backdrop-filter:blur(6px);
      box-shadow: 0 12px 40px rgba(0,0,0,0.45), inset 0 0 0 1px rgba(255,0,255,0.06);
      animation: cardIn .6s ease-out both;
    }
    @keyframes cardIn{ from{ transform:translateY(10px); opacity:0 } to{ transform:none; opacity:1 } }

    .grid{
      display:grid; gap:20px;
      grid-template-columns: 1.2fr .8fr;
    }
    @media (max-width: 900px){ .grid{ grid-template-columns:1fr } }

    .art{
      border:1px solid var(--border); border-radius:16px; overflow:hidden; position:relative;
      background:#0d0d0d;
      box-shadow: 0 0 0 1px rgba(255,0,255,0.06) inset;
    }
    .art img{ width:100%; height:100%; object-fit:cover; display:block; opacity:0; animation:imgIn 1.1s .2s both }
    @keyframes imgIn{ to{ opacity:1; } }
    .scanline{ position:absolute; inset:0; background:linear-gradient(to bottom, transparent 0%, rgba(255,0,255,.12) 50%, transparent 100%);
      mix-blend-mode:screen; animation: scan 2.4s linear infinite; pointer-events:none; }
    @keyframes scan{ from{ transform:translateY(-100%) } to{ transform:translateY(100%) } }

    .meta{
      display:grid; gap:12px; align-content:start;
    }
    .h1{
      font-size: clamp(22px, 2.6vw, 32px);
      margin:0 0 6px; letter-spacing:.02em;
      text-shadow:0 0 12px rgba(255,0,255,0.15);
    }
    .badge{
      display:inline-flex; align-items:center; gap:8px; color:var(--magenta);
      border:1px solid rgba(255,0,255,0.3); padding:6px 10px; border-radius:999px; font-size:12px;
      background:linear-gradient(180deg, rgba(255,0,255,0.10), rgba(255,0,255,0.02));
      box-shadow:inset 0 0 20px rgba(255,0,255,0.08);
      animation: glitchPulse 1.8s ease-in-out infinite;
    }
    @keyframes glitchPulse{
      0%,100%{ transform:translateX(0) }
      45%{ transform:translateX(0) }
      46%{ transform:translateX(-1px) }
      47%{ transform:translateX(1.6px) }
      48%{ transform:translateX(-0.6px) }
      49%{ transform:translateX(0.8px) }
      50%{ transform:translateX(0) }
    }

    .kv{ display:grid; grid-template-columns:130px 1fr; gap:8px; font-size:14px; }
    .k{ color:var(--muted) }
    .v .code{ background:#0d0d0d; border:1px dashed #262626; padding:4px 6px; border-radius:8px; }
    .actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top:8px }
    .btn{
      border:1px solid rgba(255,0,255,0.45);
      background:linear-gradient(180deg, rgba(255,0,255,0.18), rgba(255,0,255,0.06));
      color:var(--text); padding:10px 14px; border-radius:12px; cursor:pointer;
      text-decoration:none; display:inline-flex; align-items:center; gap:8px;
      transition: transform .08s ease, box-shadow .08s ease;
    }
    .btn:hover{ transform:translateY(-1px); box-shadow:0 8px 22px rgba(255,0,255,0.15) }
    .muted{ color:var(--muted); font-size:12px }

    footer{ position:fixed; right:18px; top:18px; z-index:3; color:var(--muted); font-size:12px }

    /* kleine, aggressive Glitches über dem gesamten UI */
    .glitch-layer{
      position:fixed; inset:0; pointer-events:none; z-index:2; mix-blend-mode:screen;
      background:
        repeating-linear-gradient(0deg, rgba(255,0,255,0.08) 0, rgba(255,0,255,0.08) 1px, transparent 1px, transparent 2px),
        linear-gradient(90deg, rgba(255,0,255,0.06), transparent 60%),
        radial-gradient(800px 400px at 20% 60%, rgba(255,0,255,0.12), transparent 70%);
      animation: drift 11s linear infinite;
    }
    @keyframes drift{
      0%{ transform: translateX(0) }
      100%{ transform: translateX(-6%) }
    }

    /* progressive Fade-in Steps für Metadaten */
    .step{ opacity:0; transform:translateY(6px); animation: stepIn .5s both }
    .step2{ animation-delay:.12s }
    .step3{ animation-delay:.18s }
    .step4{ animation-delay:.24s }
    .step5{ animation-delay:.30s }
    .step6{ animation-delay:.36s }
    @keyframes stepIn{ to{ opacity:1; transform:none } }
  </style>
</head>
<body>
  <!-- WebGL Noise Hintergrund -->
  <canvas id="gl"></canvas>
  <div class="scrim"></div>
  <div class="glitch-layer"></div>

  <!-- Header: Wordmark (Primär) -->
  <header>
    <span class="wordmark">
      <!-- eingebettetes Wordmark-SVG (Flexblock, 100% Magenta) -->
      <svg viewBox="0 0 680 120" xmlns="http://www.w3.org/2000/svg" aria-label="Flexblock Wordmark">
        <g fill="none" stroke="none">
          <text x="0" y="86" font-family="IBM Plex Mono, monospace" font-size="82" font-weight="600" letter-spacing="4" fill="#ff00ff">FLEXBLOCK</text>
        </g>
      </svg>
    </span>
    <span class="tag">verify</span>
  </header>

  <!-- Icon als Wasserzeichen (sekundär, nie kombiniert im Header) -->
  <div class="icon-watermark" aria-hidden="true">
    <!-- eingebettetes Icon in Weiß, via CSS/Opacity reduziert -->
    <svg viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg" fill="#ffffff">
      <!-- Platzhalter-Icon; hier den gelieferten SVG-Pfad einsetzen -->
      <rect x="24" y="24" width="208" height="208" rx="28" ry="28" fill="#ffffff"/>
    </svg>
  </div>

  <!-- Content -->
  <main class="wrap">
    <section class="card">
      <div class="grid">
        <div class="art">
          <img id="artImage" alt="Artwork" src="" />
          <div class="scanline"></div>
        </div>
        <div class="meta">
          <div class="badge step">● verified • on-chain linked</div>
          <h1 id="title" class="h1 step2">Lade Daten…</h1>

          <div class="kv step3">
            <div class="k">Chain</div><div id="chain" class="v"></div>
          </div>
          <div class="kv step4">
            <div class="k">Contract</div><div id="contract" class="v"><span class="code"></span></div>
          </div>
          <div class="kv step5">
            <div class="k">Token</div><div id="token" class="v"></div>
          </div>
          <div class="kv step6">
            <div class="k">Owner</div><div id="owner" class="v"><span class="code"></span></div>
          </div>

          <div class="actions step6">
            <a id="mkt" class="btn" href="#" target="_blank" rel="noopener">Marktplatz öffnen</a>
            <a id="ipfs" class="btn" href="#" target="_blank" rel="noopener">IPFS</a>
          </div>
          <div class="muted step6" id="notes"></div>
        </div>
      </div>
    </section>
  </main>

  <footer>© 2025 Flexblock</footer>

  <!-- Externe Logik -->
  <script src="/main.js" type="module"></script>

  <!-- WebGL Noise Shader (intensiv) -->
  <script>
  (function(){
    const canvas = document.getElementById('gl');
    const gl = canvas.getContext('webgl', { alpha:true, antialias:false, depth:false, stencil:false, preserveDrawingBuffer:false });
    if(!gl){ return; }

    const vertSrc = `
      attribute vec2 a;
      void main(){ gl_Position = vec4(a, 0.0, 1.0); }
    `;

    /* Fragment: heftiger, organischer Noise + horizontale Drift + Glitch-Frames */
    const fragSrc = `
      precision highp float;
      uniform vec2 r;    // resolution
      uniform float t;   // time
      float hash(vec2 p){ return fract(sin(dot(p, vec2(127.1,311.7))) * 43758.5453123); }
      float noise(vec2 p){
        vec2 i = floor(p); vec2 f = fract(p);
        float a = hash(i);
        float b = hash(i + vec2(1.0,0.0));
        float c = hash(i + vec2(0.0,1.0));
        float d = hash(i + vec2(1.0,1.0));
        vec2 u = f*f*(3.0-2.0*f);
        return mix(a,b,u.x) + (c - a)*u.y*(1.0-u.x) + (d - b)*u.x*u.y;
      }
      void main(){
        vec2 uv = gl_FragCoord.xy / r.xy;
        // anisotrope Skalierung
        vec2 p = vec2(uv.x*1.2, uv.y*1.2);
        // Basis-Noise-Ebenen
        float n1 = noise(p*3.0 + vec2(0.0, t*0.30));
        float n2 = noise(p*8.0 + vec2(t*0.15, -t*0.22));
        // horizontale Scanlines + Störung
        float scan = sin(uv.y*1200.0 + t*18.0)*0.04;
        float drift = noise(vec2(uv.y*40.0, t*0.8))*0.10;
        // sporadische harte Glitch-Balken
        float bar = smoothstep(0.0, 0.02, abs(fract(uv.y*8.0 + t*0.4)-0.5)) * 0.4;
        float glitch = step(0.97, fract(sin(t*53.0)*43758.5453));
        float g = n1*0.55 + n2*0.30 + scan + drift + bar*glitch;

        // Magenta-leaned additive Mischung
        vec3 base = vec3(0.02, 0.0, 0.04);       // sehr dunkler Magenta-Ton
        vec3 mag  = vec3(1.0, 0.0, 1.0);        // 100% Magenta
        vec3 c = base + mag * (0.26 + g*0.36);

        // Vignette
        vec2 d = uv-0.5; float vig = 1.0 - dot(d,d)*1.2;
        c *= clamp(vig, 0.15, 1.0);

        gl_FragColor = vec4(c, 1.0);
      }
    `;

    function compile(type, src){
      const sh = gl.createShader(type); gl.shaderSource(sh, src); gl.compileShader(sh);
      if(!gl.getShaderParameter(sh, gl.COMPILE_STATUS)){ console.warn(gl.getShaderInfoLog(sh)); }
      return sh;
    }
    const vs = compile(gl.VERTEX_SHADER, vertSrc);
    const fs = compile(gl.FRAGMENT_SHADER, fragSrc);
    const prog = gl.createProgram();
    gl.attachShader(prog, vs); gl.attachShader(prog, fs); gl.linkProgram(prog);
    if(!gl.getProgramParameter(prog, gl.LINK_STATUS)){ console.warn(gl.getProgramInfoLog(prog)); }
    gl.useProgram(prog);

    const a = gl.getAttribLocation(prog, 'a');
    const ur = gl.getUniformLocation(prog, 'r');
    const ut = gl.getUniformLocation(prog, 't');

    const buf = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, buf);
    // zwei Dreiecke für Fullscreen-Quad
    const quad = new Float32Array([ -1,-1,  1,-1,  -1, 1,  -1, 1,  1,-1,  1, 1 ]);
    gl.bufferData(gl.ARRAY_BUFFER, quad, gl.STATIC_DRAW);
    gl.enableVertexAttribArray(a);
    gl.vertexAttribPointer(a, 2, gl.FLOAT, false, 0, 0);

    function resize(){
      const w = Math.floor(window.innerWidth * (window.devicePixelRatio||1));
      const h = Math.floor(window.innerHeight* (window.devicePixelRatio||1));
      if(canvas.width!==w || canvas.height!==h){
        canvas.width=w; canvas.height=h;
      }
      gl.viewport(0,0,canvas.width,canvas.height);
    }
    window.addEventListener('resize', resize);
    resize();

    let start = performance.now();
    (function loop(){
      const t = (performance.now()-start)/1000;
      gl.uniform2f(ur, canvas.width, canvas.height);
      gl.uniform1f(ut, t);
      gl.drawArrays(gl.TRIANGLES, 0, 6);
      requestAnimationFrame(loop);
    })();
  })();
  </script>
</body>
</html>
